-- case000.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case000.JSONATA"
}
-- case000.JSONATA --
Account.Order[0].OrderID ~> $uppercase()
-- case000_expected.json --
"ORDER103"
-- case001.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case001.JSONATA"
}
-- case001.JSONATA --
Account.Order[0].OrderID ~> $uppercase() ~> $lowercase()
-- case001_expected.json --
"order103"
-- case002.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case002.JSONATA"
}
-- case002.JSONATA --
Account.Order.OrderID ~> $join()
-- case002_expected.json --
"order103order104"
-- case003.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case003.JSONATA"
}
-- case003.JSONATA --
Account.Order.OrderID ~> $join(", ")
-- case003_expected.json --
"order103, order104"
-- case004.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case004.JSONATA"
}
-- case004.JSONATA --
Account.Order.Product.(Price * Quantity) ~> $sum()
-- case004_expected.json --
336.36
-- case005.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case005.JSONATA"
}
-- case005.JSONATA --
( $uppertrim := $trim ~> $uppercase;  $uppertrim("   Hello    World   ") )
-- case005_expected.json --
"HELLO WORLD"
-- case006.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case006.JSONATA"
}
-- case006.JSONATA --
"john@example.com" ~> $substringAfter("@") ~> $substringBefore(".")
-- case006_expected.json --
"example"
-- case007.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case007.JSONATA"
}
-- case007.JSONATA --
"" ~> $substringAfter("@") ~> $substringBefore(".")
-- case007_expected.json --
""
-- case008.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case008.JSONATA",
  "undefinedResult": true
}
-- case008.JSONATA --
foo ~> $substringAfter("@") ~> $substringBefore(".")
-- case008_expected.json --
null
-- case009.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case009.JSONATA"
}
-- case009.JSONATA --
( $domain := $substringAfter(?,"@") ~> $substringBefore(?,"."); $domain("john@example.com") )
-- case009_expected.json --
"example"
-- case010.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case010.JSONATA"
}
-- case010.JSONATA --
( $square := function($x){$x*$x}; [1..5] ~> $map($square) )
-- case010_expected.json --
[
  1,
  4,
  9,
  16,
  25
]
-- case011.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case011.JSONATA"
}
-- case011.JSONATA --
( $square := function($x){$x*$x}; [1..5] ~> $map($square) ~> $sum() )
-- case011_expected.json --
55
-- case012.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case012.JSONATA"
}
-- case012.JSONATA --
($betweenBackets := $substringAfter(?, "(") ~> $substringBefore(?, ")");$betweenBackets("test(foo)bar"))
-- case012_expected.json --
"foo"
-- case013.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case013.JSONATA"
}
-- case013.JSONATA --
($square := function($x){$x*$x};$chain := λ($f, $g){λ($x){$g($f($x))}};$instructions := [$sum, $square];$sumsq := $instructions ~> $reduce($chain);[1..5] ~> $sumsq())
-- case013_expected.json --
225
-- case014.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case014.JSONATA"
}
-- case014.JSONATA --
($square := function($x){$x*$x};$chain := λ($f, $g){λ($x){ $x ~> $f ~> $g }};$instructions := [$sum, $square, $string];$sumsq := $instructions ~> $reduce($chain);[1..5] ~> $sumsq())
-- case014_expected.json --
"225"
-- case015.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case015.JSONATA"
}
-- case015.JSONATA --
($square := function($x){$x*$x};$instructions := $sum ~> $square;[1..5] ~> $instructions())
-- case015_expected.json --
225
-- case016.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case016.JSONATA"
}
-- case016.JSONATA --
($square := function($x){$x*$x};$sum_of_squares := $map(?, $square) ~> $sum;[1..5] ~> $sum_of_squares())
-- case016_expected.json --
55
-- case017.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case017.JSONATA"
}
-- case017.JSONATA --
($times := λ($x, $y) { $x * $y };$product := $reduce(?, $times);$square := function($x){$x*$x};$product_of_squares := $map(?, $square) ~> $product;[1..5] ~> $product_of_squares())
-- case017_expected.json --
14400
-- case018.json --
{
  "dataset": "",
  "bindings": {},
  "exprFile": "case018.JSONATA"
}
-- case018.JSONATA --
($square := function($x){$x*$x};[1..5] ~> $map($square) ~> $reduce(λ($x, $y) { $x * $y });)
-- case018_expected.json --
14400
-- case019.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case019.JSONATA"
}
-- case019.JSONATA --
($prices := Account.Order.Product.Price;$quantities := Account.Order.Product.Quantity;$product := λ($arr) { $arr[0] * $arr[1] };$zip($prices, $quantities) ~> $map($product) ~> $sum())
-- case019_expected.json --
336.36
-- case020.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case020.JSONATA"
}
-- case020.JSONATA --
42 ~> "hello"
-- case020_expected.json --
null
-- case021.json --
{
  "dataset": "dataset5__INPUT",
  "bindings": {},
  "exprFile": "case021.JSONATA"
}
-- case021.JSONATA --
Account.Order.Product[$."Product Name" ~> /hat/i].ProductID
-- case021_expected.json --
[
  858383,
  858236,
  858383
]
